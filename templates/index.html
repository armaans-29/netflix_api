<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Netflix Recommender</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <div class="container">
    <h1>Netflix Movie Recommender</h1>
    <input type="text" id="movieInput" placeholder="Enter a movie title..." />
    <button onclick="getRecommendations()">Get Recommendations</button>

    <div id="resultArea">
      <h2 id="recTitle" style="display: none;">These Are Your Recommendations:</h2>
      <ul id="recommendations"></ul>
    </div>
  </div>

  <script>
    async function getRecommendations() {
      const movie = document.getElementById("movieInput").value;
      const res = await fetch(/recommend?movie=${encodeURIComponent(movie)});
      const data = await res.json();

      const resultTitle = document.getElementById("recTitle");
      const list = document.getElementById("recommendations");
      list.innerHTML = "";

      if (data.recommendations.length > 0) {
        resultTitle.style.display = "block";
        let index = 0;
        const interval = setInterval(() => {
          if (index >= data.recommendations.length) {
            clearInterval(interval);
            return;
          }
          const li = document.createElement("li");
          li.textContent = data.recommendations[index];
          list.appendChild(li);
          index++;
        }, 500);
      } else {
        resultTitle.style.display = "none";
        list.innerHTML = "<li>No recommendations found for this movie.</li>";
      }
    }
  </script>
</body>
</html>